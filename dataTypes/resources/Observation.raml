#%RAML 1.0 DataType

#This file is located at dataTypes/resources/Observation.raml

uses:
  FHIR_primitive_types: ../primitives/FHIR_primitive_types.raml
  FHIR_element_types: ../elements/FHIR_element_types.raml

description: |
  Measurements and simple assertions
  + If code is the same as a component code then the value element associated with the code SHALL NOT be present
  + dataAbsentReason SHALL only be present if Observation.value[x] is not present
type: !include DomainResource.raml
properties:
  identifier?:
    description: Business Identifier for observation
    type: FHIR_element_types.Identifier[]
  basedOn?:
    description: Fulfills plan, proposal or order
    type: FHIR_element_types.Reference[]
  status:
    description: Observation status
    type: FHIR_primitive_types.code
    enum: [registered, preliminary, final, ammended, corrected, cancelled, entered-in-error, unknown]
  category?:
    description: Classification of type of observation
    type: FHIR_element_types.CodeableConcept[]
  code:
    description: Type of observation (code / type)
    type: FHIR_element_types.CodeableConcept
  subject?:
    description: Who and/or what this is about
    type: FHIR_element_types.Reference
  context?:
    description: Healthcare event during which this observation is made
    type: FHIR_element_types.Reference
  effectiveDateTime?:
    description: Clinically relevant time for observation
    type: FHIR_primitive_types.dateTime
  effectivePeriod?:
    description: Clinically relevant time-period for observation
    type: FHIR_element_types.Period
  issued?:
    description: Date/Time this was made available
    type: FHIR_primitive_types.instant
  performer?:
    description: Who is responsible for the observation
    type: FHIR_element_types.Reference[]
  valueQuantity?:
    description: Actual result
    type: FHIR_element_types.Quantity
  valueCodeableConcept?:
    description: Actual result
    type: FHIR_element_types.CodeableConcept
  valueString?:
    description: Actual result
    type: string
  valueBoolean?:
    description: Actual result
    type: boolean
  valueRange?:
    description: Actual result
    type: FHIR_element_types.Range
  valueRatio?:
    description: Actual result
    type: FHIR_element_types.Ratio
  valueSampledData?:
    description: Actual result
    type: FHIR_element_types.SampledData
  valueAttachment?:
    description: Actual result
    type: FHIR_element_types.Attachment
  valueTime?:
    description: Actual result
    type: FHIR_primitive_types.time
  valueDateTime?:
    description: Actual result
    type: FHIR_primitive_types.dateTime
  valuePeriod?:
    description: Actual result
    type: FHIR_element_types.Period
  dataAbsentReason?:
    description: Why the result is missing
    type: FHIR_element_types.CodeableConcept
  interpretation?:
    description: High, low, normal, etc.
    type: FHIR_element_types.CodeableConcept
  comment?:
    description: Comments about result
    type: string
  bodySite?:
    description: Observed body part
    type: FHIR_element_types.CodeableConcept
  method?:
    description: How it was done
    type: FHIR_element_types.CodeableConcept
  specimen?:
    description: Specimen used for this observation
    type: FHIR_element_types.Reference
  device?:
    description: (Measurement) Device
    type: FHIR_element_types.Reference
  referenceRange?:
    description: |
      Provides guide for interpretation
      + Must have at least a low or a high or text
    type: array
    items:
      type: FHIR_element_types.BackboneElement
      properties:
        low?:
          description: Low Range, if relevant
          type: FHIR_element_types.SimpleQuantity
        high?:
          description: High Range, if relevant
          type: FHIR_element_types.SimpleQuantity
        type?:
          description: Reference range qualifier
          type: FHIR_element_types.CodeableConcept
        appliesTo?:
          description: Reference range population
          type: FHIR_element_types.CodeableConcept[]
        age?:
          description: Applicable age range, if relevant
          type: FHIR_element_types.Range
        text?:
          description: Text based reference range in an observation
          type: string
  related?:
    description: Resource related to this observation
    type: array
    items:
      type: FHIR_element_types.BackboneElement
      properties:
        type?:
          description: Observation relationship type
          type: FHIR_primitive_types.code
          enum: [has-member, derived-from, sequel-to, replaces, qualified-by, interfered-by]
        target:
          description: Resource that is related to this one
          type: FHIR_element_types.Reference
  component?:
    description: Component results
    type: array
    items:
      type: FHIR_element_types.BackboneElement
      properties:
        code:
          description: Type of component observation (code / type)
          type: FHIR_element_types.CodeableConcept
        valueQuantity?:
          description: Actual component result
          type: FHIR_element_types.Quantity
        valueCodeableConcept?:
          description: Actual component result
          type: FHIR_element_types.CodeableConcept
        valueString?:
          description: Actual component result
          type: string
        valueRange?:
          description: Actual component result
          type: FHIR_element_types.Range
        valueRatio?:
          description: Actual component result
          type: FHIR_element_types.Ratio
        valueSampledData?:
          description: Actual component result
          type: FHIR_element_types.SampledData
        valueAttachment?:
          description: Actual component result
          type: FHIR_element_types.Attachment
        valueTime?:
          description: Actual component result
          type: FHIR_primitive_types.time
        valueDateTime?:
          description: Actual component result
          type: FHIR_primitive_types.dateTime
        valuePeriod?:
          description: Actual component result
          type: FHIR_element_types.Period
        dataAbsentReason?:
          description: Why the component result is missing
          type: FHIR_element_types.CodeableConcept
        interpretation?:
          description: High, low, normal, etc.
          type: FHIR_element_types.CodeableConcept
        referenceRange?:
          description: Provides guide for interpretation of component result
          type: array
          items:
            type: FHIR_element_types.BackboneElement
            properties:
              low?:
                description: Low Range, if relevant
                type: FHIR_element_types.SimpleQuantity
              high?:
                description: High Range, if relevant
                type: FHIR_element_types.SimpleQuantity
              type?:
                description: Reference range qualifier
                type: FHIR_element_types.CodeableConcept
              appliesTo?:
                description: Reference range population
                type: FHIR_element_types.CodeableConcept[]
              age?:
                description: Applicable age range, if relevant
                type: FHIR_element_types.Range
              text?:
                description: Text based reference range in an observation
                type: string
